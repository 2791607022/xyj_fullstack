### WebScoket

#### 介绍
    WebSocket是基于TCP的应用层协议，用于在C/S架构的应用中实现双向通信，它实现了浏览器与服务器全双工(full-duplex)通信，也就是允许服务器主动发送信息给客户端。
#### 特点
    - WebSocket 协议主要为了解决基于 HTTP/1.x 的 Web 应用无法实现服务端向客户端主动推送的问题, 为了兼容现有的设施, WebSocket 协议使用与 HTTP 协议相同的端口, 并使用 HTTP Upgrade 机制来进行 WebSocket 握手, 当握手完成之后, 通信双方便可以按照 WebSocket 协议的方式进行交互，它的特点包括：
        1. 建立在 TCP 协议之上，服务器端的实现比较容易。
        2. 与 HTTP 协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。
        3. 数据格式比较轻量，性能开销小，通信高效。
        4. 可以发送文本，也可以发送二进制数据 等

#### 过程
    客户端发起http请求，经过3次握手后，建立起TCP连接；并发起协议升级请求，请求采用的是标准的HTTP报文格式，且只支持GET方法，请求中几个重点的首部字段和其属性是：
        Connection 字段表示链接方式，将字段值设置为 Upgrade ，表示要从当前 http升级到其他协议
        Upgrade 字段表示要升级的协议，将字段值设置为websocket，表示要升级到websocket协议。
        Sec-WebSocket-Version 字段表示websocket的版本，如果服务端不支持该版本，服务器需要返回一个Sec-WebSocket-Versionheader，里面是支持的版本号。
        Sec-WebSocket-Key字段与后面服务端响应的Sec-WebSocket-Accept是配套的，可以提供基本的防护，避免恶意或无意的连接。
    然后，服务器收到客户端的握手请求后，同样采用HTTP协议回馈升级协议的相关信息；
    最后，客户端收到连接成功的消息后，开始借助于TCP传输信道进行全双工通信。

#### 应用场景
    1.即时聊天通信
    2.多玩家游戏
    3.在线协同编辑/编辑
    4.实时数据流的拉取与推送
    5.体育/游戏实况