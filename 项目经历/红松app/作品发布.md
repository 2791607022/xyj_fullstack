### 开发背景
    作品发布平台给学员和老师提供一个展示和交流的机会，原来的发布器需要改版，形成一个单独的发布组件，

### 设计
    发布器作为一个承接发布行为和内容编辑页面的操作平台，是一个从手机底部向上弹出的Modal, 一开始是直接使用rn的Modal组件来作为容器，但发现完成之后，Modal的灰色蒙层的视觉效果比较槽糕，整个灰色背景会一整块地出现和消失，影响体验，我更换了第三方的antd-moile的弹窗组件也没有解决这个问题，后来了解到 react-native-animatable 动画库，便使用它来做弹窗背景的淡入淡出效果，使用Animatable.View 组件包裹整个发布器部分 设置 animation 动画轨迹为从y轴底部到底部，设置动画的duration周期，并添加Easing.linear 的淡入淡出效果，提升了组件的视觉效果。

    播放器优化主要是改变原有的点击图标进入另一个播放页面的方式，用一个新的播放组件使得音频能在作品的列表页，详情页面中播放，拉动。音频的拉到条采用的是rn的slider组件，value设置当前进度条的值，maxvalue设置最大进度值为200，在onValueChange方法上更新 进度条这个 state的状态并同步更显示的当前播放时间的文本。
    并且监听滑动条的 onSlidingComplete函数，当滑动结束时，调用当前audio组件实例上的seekTo方法，把音频的播放时间设为当前进度条所占总进度条的百分比再乘以音频总时长 这个时间，达到拉到进度条改变播放时间的功能， audio组件上接受一些常规参数并且在onProgress回调方法中监听音频进度的改变，在回调中获取到当前的音频时间，用它除以总时长在乘总进度条200得到当前进度，用setProgress 更新 state 同时更新时间文本

### 问题

    1.当作业列表比较长时，出现多个音频类的作品，播放会卡顿并且可以同时播放多个音频，作品列表页的音频播放会影响到该作品详情页的播放和进度条状态。后面采用作品的id加上所处的页面位置合成一个唯一的播放id 并存储在Mobx的 store里面。 当点击播放时将当前播放id存入,播放结束时清空这个id。使用useEffect监听store里存储的播放id,如果与目前作品的播放id不一致，那么就会立刻暂停播放并初始化组件状态，同时使得当前的Slider不可滑动。这样完成同时只能播放一个音频并锁定其他音频的滑动状态，同时让同一音频在不同页面里面的状态是独立的。

    2.弱网情况下，音频实际播放状态和播放按钮的状态不统一，了解到音频加载和组件的加载是异步的，弱网时音频资源加载较慢。所以新加了加载中和加载完毕的状态，因为audio的onLoad调用时，音频已经是加载完毕状态，所以onLoad内更新加载的 state,d当点击播放按钮时会先判断加载状态再去改变播放状态。